<polymer-element name="general-settings" attributes="scope">
    <template>
        <link rel="stylesheet" href="../../../css/settings-page.css">
        <div class="content" fit>
            <div class="design-settings-panel settings-panel">
                <h2 class="title-item">Design</h2>
                <ul class="design-settings-list">
                    <li class="row" horizontal layout start>
                        <div class="col-5 label-block">
                            <span class="settings-label">Theme</span>
                        </div>
                        <paper-radio-group id="theme" selected="{{scope.theme}}" class="col-7 theme-radio-group" on-change="{{saveTheme}}" layout horizontal start>
                            <paper-radio-button name="light" label="light"></paper-radio-button>
                            <paper-radio-button name="dark" label="dark"></paper-radio-button>
                        </paper-radio-group>
                    </li>
                    <li class="row" horizontal layout start>
                        <div class="col-5 label-block">
                            <span class="settings-label">Colour</span>
                        </div>
                        <div class="col-7">
                            <paper-input-decorator id="themeColor"
                                                   label="Set color"
                                                   class="theme-color">
                                <input type="text" value="{{scope.themeColor}}" on-blur="{{saveData}}">
                            </paper-input-decorator>
                        </div>
                    </li>
                    <li class="row" horizontal layout start>
                        <div class="col-5 label-block">
                            <span class="settings-label">Logo</span>
                        </div>
                        <div class="col-7 upload-photo-group">
                            <paper-button class="upload-logo-button">
                                <core-icon icon="file-upload" class="upload-logo-button-icon"></core-icon>
                                Upload Logo
                            </paper-button>
                            <span class="logo-size">100px X 50px(.png)</span>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="email-settings-panel settings-panel">
                <h2 class="title-item">Email</h2>
                <form class="email-settings-list settings-list-form" id="emailSettings">
                    <paper-input-decorator id="servAddres"
                                           label="SMTP Server Address"
                                           floatingLabel
                                           error="Please enter SMTP Server Address">
                        <input type="text" value="{{scope.servAddres}}" on-blur="{{saveData}}" required>
                    </paper-input-decorator>
                    <paper-input-decorator id="servPort"
                                           label="SMTP Server Port"
                                           floatingLabel
                                           error="Please enter SMTP Server Port">
                        <input type="number" value="{{scope.servPort}}" on-blur="{{saveData}}" required>
                    </paper-input-decorator>
                    <paper-input-decorator id="ssl"
                                           label="SSL"
                                           floatingLabel
                                           error="Please enter SSL">
                        <input type="number" value="{{scope.ssl}}" on-blur="{{saveData}}" required>
                    </paper-input-decorator>
                    <span class="optional-label">Optional</span>
                    <paper-input-decorator id="username"
                                           label="Username"
                                           floatingLabel
                                           error="Please enter Username">
                        <input type="text" value="{{scope.username}}" on-blur="{{saveData}}" required>
                    </paper-input-decorator>
                    <paper-input-decorator id="password"
                                           label="Password"
                                           floatingLabel
                                           error="Please enter Password">
                        <input type="password" value="{{scope.password}}" on-blur="{{saveData}}" required>
                    </paper-input-decorator>
                </form>
            </div>
        </div>
    </template>
    <script>
        Polymer('general-settings',{
            scope: {
                servAddres: ' ',
                servPort: 0,
                ssl: 0,
                username: ' ',
                password: ' '
            },
            emailSettingsUpdate: function(){
                //Data lost or empty form
                var me = this;
                var emailSettings = {
                    servAddres: me.$.servAddres,
                    servPort: me.$.servPort,
                    ssl: me.$.ssl,
                    username: me.$.username,
                    password: me.$.password
                };

                for (var field in emailSettings) {
                    updateUserFormLabels(emailSettings[field]);
                }

                function updateUserFormLabels(e){
                    e.input.value = '';
                    e.updateLabelVisibility();
                }
            },
            saveData: function(e) {
                var fieldName = e.currentTarget.parentNode.id;
                var fieldDecorator = e.currentTarget.parentNode;

                if (fieldDecorator.validate()) {
                    //Submit must be here!
                    //console.log(this.scope[fieldName]);
                }
                else {
                    e.currentTarget.focus();
                }
            },
            saveTheme: function(e){
                var fieldName = e.currentTarget.id;
                //Submit must be here!
                console.log(this.scope[fieldName]);
            }
        });
    </script>
</polymer-element>