<link rel="import" href="chart-board.html">
<polymer-element name="dashboard-page">
    <template>
        <link rel="stylesheet" href="../../../css/dashboard-page.css">
        <side-menu class="{{page.class}}" pageUrl="{{page.url}}" pageTitle="{{page.title}}">
            <template repeat="{{val in dashboardContent}}">
                <chart-board name="{{val.name}}" type="{{val.type}}" values="{{val.data}}"></chart-board>
            </template>
            <div class="dashboard-dropdown">
                <paper-fab icon="add" on-tap="{{openMenu}}" relatedTarget></paper-fab>
                <paper-dropdown opened="{{menuStatus}}" class="dashboard-menu-dropdown" halign="right" valign="top">
                    <div class="menu-list menu">
                        <paper-item class="item">
                            <div class="label">Holding Charts</div>
                            <paper-ripple fit></paper-ripple>
                        </paper-item>
                        <paper-item class="item">
                            <div class="label" >Corporate Events</div>
                            <paper-ripple fit></paper-ripple>
                        </paper-item>
                        <paper-item class="item">
                            <div class="label">Calendar Events</div>
                            <paper-ripple fit></paper-ripple>
                        </paper-item>
                    </div>
                </paper-dropdown>
            </div>
        </side-menu>
        <app-globals id="globals"></app-globals>
        <core-ajax auto
                   id="dashboardItems"
                   on-core-response="{{contentResponse}}"></core-ajax>
    </template>
    <script>
        Polymer('dashboard-page', {
            ready: function(){
                this.$.dashboardItems.url = this.$.globals.url+'resources/json/charts.json';
            },
            contentResponse: function(e, data){
                var me = this;
                if(data.response.success){
                    this.dashboardContent = data.response.content;
                }
            },
            page: {
                class: 'dashboard-page',
                url: 'dashboard',
                title: 'Dashboard'
            },
            openMenu: function(e){
                var me = this;
                me.menuStatus = true;
            },
            menuStatus: false
        })
    </script>
</polymer-element>