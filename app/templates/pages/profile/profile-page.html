<polymer-element name="profile-page">
    <template>
        <link rel="stylesheet" href="../../../css/profile-page.css">
        <side-menu class="{{page.class}}" pageUrl="{{page.url}}" pageTitle="{{page.title}}" id="sideMenu">
            <div class="header">
                <h2 class="profile-name title-item">Profile: "{{user.name}}"</h2>
            </div>
            <core-media-query query="max-width: 768px"
                              queryMatches="{{phoneScreen}}"></core-media-query>
            <div class="profile-form-wrapper" layout vertical?="{{phoneScreen}}"
                 horizontal?="{{!phoneScreen}}" start?="{{!phoneScreen}}" >
                <div flex?="{{!phoneScreen}}" class="profile-form">

                    <form class="user-data" id="userForm">

                        <paper-input-decorator id="firstName"
                                               label="First Name"
                                               floatingLabel>
                            <input type="text" value="{{user.firstName}}">
                        </paper-input-decorator>
                        <paper-input-decorator id="lastName"
                                               label="Last Name"
                                               floatingLabel>
                            <input type="text" value="{{user.lastName}}">
                        </paper-input-decorator>
                        <paper-input-decorator id="email"
                                               label="E-mail"
                                               floatingLabel>
                            <input type="email" value="{{user.email}}">
                        </paper-input-decorator>
                        <paper-input-decorator id="cellphone"
                                               label="Cellphone"
                                               floatingLabel>
                            <input type="tel" value="{{user.cellphone}}">
                        </paper-input-decorator>
                        <paper-input-decorator id="idNumber"
                                               label="ID Number"
                                               floatingLabel>
                            <input type="number" value="{{user.idNumber}}">
                        </paper-input-decorator>
                    </form>
                </div>
                <div flex?="{{!phoneScreen}}" class="profile-image">
                    <core-image class="profile-photo" src="{{user.photo}}" sizing="cover" style="width: 200px; height: 200px"></core-image>
                </div>
            </div>
        </side-menu>
        <app-globals id="globals"></app-globals>
        <core-ajax auto
                   id="profileContent"
                   on-core-response="{{contentResponse}}"></core-ajax>
    </template>
    <script>
        Polymer('profile-page',{
            ready: function (){
                this.$.profileContent.url = this.$.globals.url+'resources/json/user.json';
            },
            contentResponse: function(e, data){
                var me = this;

                var userFirstNameField = me.$.sideMenu.querySelector('#firstName').input;
                if(data.response.success){
                    me.userData = data.response.user;
                    me.user = me.userData;
                    me.user.name = me.userData.firstName + ' ' + me.userData.lastName;
                }
            },
            page: {
                class: 'profile-page',
                url: 'profile',
                title: 'Profile'
            },
            user: {
                name: 'User name'
            }
        })
    </script>
</polymer-element>